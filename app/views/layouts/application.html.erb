<!DOCTYPE html>
<html>
  <head>
    <title>Littube</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag    'application', "data-turbolinks-track" => true, media: 'all' %>
    <%= javascript_include_tag 'application', "data-turbolinks-track" => true %>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
  </head>

  <body>
  <header class="">
  <nav class="navbar navbar-expand-sm bg-light">
    <ul class="navbar-nav text-dark">
      <% if current_user.try(:admin?) %>
        <li class="nav-item">
          <%= link_to "管理者メニュー", "/admin", class: "nav-link text-danger" %>
        </li>
      <% end %>
      <% if user_signed_in? %>
        <li class="nav-item circle" >
          <%= current_user.icon.url.present? ? image_tag(current_user.icon.url) : image_tag('default_icon.jpg') %>
        </li>
        <li class="nav-item" >
          <%= link_to "#{current_user.name}のページ", user_path(current_user.id), class: "nav-link text-dark" %>
        </li>
        <li class="nav-item">
          <%= link_to "動画一覧", videos_path, class: "nav-link text-dark" %>
        </li>
        <li class="nav-item">
          <%= link_to "タグ一覧", tags_path, class: "nav-link text-dark"  %>
        </li>
        <li class="nav-item">
          <%= link_to  'ユーザー一覧', users_path, class: "nav-link text-dark"  %>
        </li>
        <li class="nav-item">
          <%= link_to "ログアウト", destroy_user_session_path, method: :delete, class: "nav-link text-dark"  %>
        </li>
      <% else %>
        <li class="nav-item">
          <%= link_to "ログイン", new_user_session_path, class: "nav-link text-dark"  %>
        </li>
        <li class="nav-item">
          <%= link_to "新規登録", new_user_registration_path, class: "nav-link text-dark"  %>
        </li>
        <li class="nav-item">
          <%= link_to "動画一覧", videos_path, class: "nav-link text-dark"  %>
        </li>
        <li class="nav-item">
          <%= link_to "タグ一覧", tags_path, class: "nav-link text-dark"  %>
        </li>
      <% end %>
    </ul>
  </nav>
</header>
    <div class = "container">
      <div class="flash time-limit">
        <% flash.each do |key, value| %>
          <% if key == "danger" %>
            <%= content_tag(:div, value, class: "#{key} alert alert-danger") %>
          <% elsif key == "edit" %>
            <%= content_tag(:div, value, class: "#{key} alert alert-success") %>
          <% elsif %>
            <%= content_tag(:div, value, class: "#{key} alert alert-primary") %>
          <% end %>
        <% end %>
      </div>
          <%= yield %>
    </div>
  </body>
</html>
